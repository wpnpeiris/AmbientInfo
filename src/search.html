<!doctype html>
<html>
  <head>
    <title>Search</title>
  </head>
  <body>
  	<div id="login-container" class="pre-auth">
      This application requires access to your YouTube account.
      Please <a href="#" id="login-link">authorize</a> to continue.
    </div>
    <div id="buttons">
      <label> <input id="query" value='cats' type="text"/><button id="search-button" onclick="search()">Search</button></label>
    </div>
    <div id="search-container">
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    
    
    
    <script>
    	var OAUTH2_CLIENT_ID = '828354648034-u1t6skdn9et6ursvckqn6aktanc8a519.apps.googleusercontent.com';
		var OAUTH2_SCOPES = [
		  'https://www.googleapis.com/auth/youtube'
		];
		
		googleApiClientReady=function() {
          gapi.auth.init(function() {
		    window.setTimeout(checkAuth, 1);
		  });
        };
        
        function checkAuth() {
		  gapi.auth.authorize({
		    client_id: OAUTH2_CLIENT_ID,
		    scope: OAUTH2_SCOPES,
		    immediate: true
		  }, handleAuthResult);
		}
		
        function handleAuthResult(authResult) {
		  if (authResult && !authResult.error) {
		    // Authorization was successful. Hide authorization prompts and show
		    // content that should be visible after authorization succeeds.
		    $('.pre-auth').hide();
		    $('.post-auth').show();
		    loadAPIClientInterfaces();
		  } else {
		    // Make the #login-link clickable. Attempt a non-immediate OAuth 2.0
		    // client flow. The current function is called when that flow completes.
		    $('#login-link').click(function() {
		      gapi.auth.authorize({
		        client_id: OAUTH2_CLIENT_ID,
		        scope: OAUTH2_SCOPES,
		        immediate: false
		        }, handleAuthResult);
		    });
		  }
		}
		
		function loadAPIClientInterfaces() {
		  gapi.client.load('youtube', 'v3', function() {
		    handleAPILoaded();
		  });
		}
        
        function handleAPILoaded() {
  			 $('#search-button').attr('disabled', false);
		}

		function search() {
		  var q = $('#query').val();
		  alert(q);
		  var request = gapi.client.youtube.search.list({
		    q: q,
		    part: 'snippet'
		  });
		
		  request.execute(function(response) {
		    var str = JSON.stringify(response.result);
		    alert(str);
		  });
		}	

        
        
       
		
		
			
		
	</script>
	
    <script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>
  </body>
  
</html>